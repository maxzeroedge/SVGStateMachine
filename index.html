<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Parser</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="./svg_state_controller.js" type="module"></script>
    <style>
        .hide{
            display: none;
        }
    </style>
</head>
<body>
    <input type="file" name="svg_state_selector" id="svg_state_selector" />
    <div id="svg_state_output"></div>
    <div class="hide" id="dummy"></div>
    <script>
        // import StateController from './svg_state_controller';
        const domParser = new DOMParser();
        document.getElementById("svg_state_selector").addEventListener("change", (e)=>{
            if(e.currentTarget.files && e.currentTarget.files[0]){
                var mimeType = e.currentTarget.files[0].type;
                if(mimeType == "image/svg+xml"){
                    var fileReader = new FileReader();
                    fileReader.onload = function(){
                        const input = domParser.parseFromString(fileReader.result, "text/html");
                        const output = StateController.parseSVG(input);
                        document.getElementById('svg_state_output').textContent = JSON.stringify(output);
                    }
                    fileReader.readAsText(e.currentTarget.files[0]);
                }
            }
        });
    </script>
</body>
</html>